%Useful lengths
\newlength{\cvtitlewidth}\setlength{\cvtitlewidth}{8cm}
\newlength{\cvnamewidth}\setlength{\cvnamewidth}{5cm}
\newlength{\cvpicturewidth}\setlength{\cvpicturewidth}{2.4cm}
\newlength{\cvassetspanelwidth}
\newlength{\cvassetitemsep}\setlength{\cvassetitemsep}{0.4em}
\newlength{\cvassetspanelleftmargin}\setlength{\cvassetspanelleftmargin}{1cm}
\newlength{\cvcontactpanelwidth}\setlength{\cvcontactpanelwidth}{7cm}

\DeclareTextFontCommand{\emph}{\color{main}}

\renewcommand*{\maketitle}{
	\DeclareTextFontCommand{\emph}{\color{contrastmain}}
	\colorlet{iconstemp}{icons}
	\colorlet{icons}{contrast}
	\hspace*{-1\marginparwidth}\colorbox{title}{\hspace*{\marginparwidth}%
    \begin{minipage}{\paperwidth}
        \leavevmode\color{contrast}
        \setlength{\cvassetspanelwidth}{\textwidth - \cvnamewidth}
        \@ifundefined{@cvpicture}%
            {}%
            {%
                \setlength{\cvassetspanelwidth}{\cvassetspanelwidth - \cvpicturewidth - \cvhspace}%
                \begin{minipage}[t]{\cvpicturewidth}%
                    \fboxsep=1mm\fboxrule=0.05pt\fcolorbox{black}{white}{\includegraphics[keepaspectratio=true,width=\cvpicturewidth]{\@cvpicture}}%
                \end{minipage}%
            \hspace{\cvhspace}}
        \begin{minipage}[t]{\cvnamewidth}
            \vspace{0pt}
            \leavevmode\mystyle[name]\color{contrast}{\@ifundefined{@cvacademictitle}{}{\small\@cvacademictitle~}}\@cvfirstname~\@cvlastname
            \@ifundefined{@cvtitle}{}{{\\\mystyle[title]\color{contrast}\@cvtitle\par}}
        \end{minipage}
        \begin{minipage}[t]{0.3\cvassetspanelwidth}
            \vspace{0pt}
            \begin{tabular}[t]{@{}c@{}l@{}}
                \cvcontactszone[main]
            \end{tabular}
        \end{minipage}
        \hfill
        \begin{minipage}[t]{0.3\cvassetspanelwidth}
            \vspace{0pt}
            \begin{tabular}[t]{@{}c@{}l@{}}
                \cvcontactszone[social]
            \end{tabular}
        \end{minipage}
        \hfill
        \begin{minipage}[t]{0.3\cvassetspanelwidth}
            \vspace{0pt}
            \begin{tabular}[t]{@{}c@{}l@{}}
                \cvcontactszone[extra]
            \end{tabular}
        \end{minipage}
	\end{minipage}}\\[3ex]
	\colorlet{icons}{iconstemp}
	\@ifundefined{@cvquote}{}{{\centering\mystyle[quote]\@cvquote\\[2ex]}}
}

\renewcommand*{\renderasset}[1]{\item{\mystyle[asset]\color{contrast} \cvasset[#1]}}

\renewcommand*{\renderassetifdefined}[1]{\ifcvasset[#1]{\renderasset{#1}}{\ignorespaces}}

\renewcommand*{\rendercontact}[1]{\mystyle[#1bullet] & \begin{tabular}[t]{>{\mystyle[#1]}l}\cvcontactlink{#1}\end{tabular} \\[0.3em]}

\renewcommand*{\rendercontactifdefined}[1]{\ifcvcontact[#1]{\rendercontact{#1}}{\ignorespaces}}


\endinput
